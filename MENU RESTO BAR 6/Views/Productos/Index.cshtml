@model IEnumerable<MENU_RESTO_BAR_6.Models.Producto>

@{
    ViewData["Title"] = "Index";
}
<div class="menu-group">
<h1>Nuestro Menu</h1>
    <a href="@Url.Action("Index", "Reservas")" class="btn btn-primary">Reservar ahora</a>
<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Nombre)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Descripcion)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Precio)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Categoria)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Nombre)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Descripcion)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Precio)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Categoria)
            </td>
            <td>
                
                <button class="add-to-cart" data-id="@item.ProductoId" data-name="@item.Nombre" data-price="@item.Precio">Agregar al carrito</button>
        
                       

                <a asp-action="Details" asp-route-id="@item.ProductoId">Details</a>
            </td>
        </tr>
}
    </tbody>
</table>
</div>
<script>
    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', function () {
            const id = this.dataset.ProductoId
            const name = this.dataset.Nombre;
            const price = this.dataset.Precio;

            fetch('/cart/AddToCart') {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ ProductoId, Nombre, Precio })
            }).then(response => {
                if (response.ok) alert('Producto agregado al carrito');
            });
        });
    });
</script>